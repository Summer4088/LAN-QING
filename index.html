<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>烧脑的小迷宫</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            love: {
              primary: '#FF4D6D',
              secondary: '#C77DFF',
              accent: '#FFC2D1',
              light: '#FFF0F3',
              dark: '#C9184A'
            }
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }
      .animate-pulse-slow {
        animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      .gradient-text {
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        background-image: linear-gradient(to right, #FF4D6D, #C9184A);
      }
      .maze-wall {
        background-color: #FF4D6D;
        border-radius: 4px;
      }
      .maze-path {
        background-color: #FFF0F3;
      }
      .maze-player {
        position: absolute;
        width: 20px;
        height: 20px;
        background-color: #C77DFF;
        border-radius: 50%;
        transition: all 0.1s ease;
        z-index: 10;
        box-shadow: 0 0 10px rgba(199, 125, 255, 0.7);
      }
      .maze-finish {
        position: absolute;
        width: 20px;
        height: 20px;
        background-color: #FFD700;
        border-radius: 50%;
        animation: pulse 1.5s infinite;
        z-index: 5;
      }
      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
        animation: confetti-fall 3s ease-in-out forwards;
      }
      .letter {
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      .letter.open {
        transform: rotateY(180deg);
      }
      .letter-front, .letter-back {
        backface-visibility: hidden;
      }
      .letter-back {
        transform: rotateY(180deg);
      }
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="font-inter bg-gradient-to-br from-love-light to-white min-h-screen">
  <!-- 导航栏 -->
  <nav id="main-nav" class="fixed top-0 w-full bg-white/80 backdrop-blur-md z-50 transition-all duration-300 shadow-sm">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <a href="#" class="text-2xl font-bold gradient-text flex items-center">
        <i class="fa-solid fa-heart-pulse mr-2 animate-pulse-slow"></i>
        <span>爱的迷宫</span>
      </a>
      <div class="hidden md:flex space-x-6">
        <a href="#home" class="text-gray-700 hover:text-love-primary transition-colors duration-300">首页</a>
        <a href="#maze" class="text-gray-700 hover:text-love-primary transition-colors duration-300">迷宫游戏</a>
        <a href="#letters" class="text-gray-700 hover:text-love-primary transition-colors duration-300">电子情书</a>
        <a href="#messages" class="text-gray-700 hover:text-love-primary transition-colors duration-300">爱情留言板</a>
      </div>
      <button id="menu-toggle" class="md:hidden text-gray-700 focus:outline-none">
        <i class="fa-solid fa-bars text-xl"></i>
      </button>
    </div>
    <!-- 移动端菜单 -->
    <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100">
      <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
        <a href="#home" class="text-gray-700 hover:text-love-primary transition-colors duration-300 py-2">首页</a>
        <a href="#maze" class="text-gray-700 hover:text-love-primary transition-colors duration-300 py-2">迷宫游戏</a>
        <a href="#letters" class="text-gray-700 hover:text-love-primary transition-colors duration-300 py-2">电子情书</a>
        <a href="#messages" class="text-gray-700 hover:text-love-primary transition-colors duration-300 py-2">爱情留言板</a>
      </div>
    </div>
  </nav>

  <!-- 首页 -->
  <section id="home" class="pt-32 pb-20 px-4">
    <div class="container mx-auto max-w-6xl">
      <div class="flex flex-col md:flex-row items-center justify-between gap-12">
        <div class="w-full md:w-1/2 text-center md:text-left">
          <h1 class="text-[clamp(2.5rem,5vw,4rem)] font-bold leading-tight mb-6 gradient-text">
            探索<span class="text-love-dark">一个小迷宫</span>
          </h1>
          <p class="text-lg md:text-xl text-gray-700 mb-8 max-w-lg mx-auto md:mx-0">
            一起穿越三个充满挑战的迷宫，每到终点都有我为你准备的惊喜。
            完成所有关卡，宝贝会获得一份特别的礼物哦。
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
            <a href="#maze" class="bg-love-primary hover:bg-love-dark text-white font-semibold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center">
              <i class="fa-solid fa-gamepad mr-2"></i> 开始游戏
            </a>
            <a href="#letters" class="bg-white hover:bg-gray-50 text-love-primary border border-love-primary font-semibold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center">
              <i class="fa-solid fa-envelope mr-2"></i> 查看情书
            </a>
          </div>
        </div>
        <div class="w-full md:w-1/2 relative">
          <div class="relative w-full h-[300px] md:h-[400px] animate-float">
            <img src="https://picsum.photos/seed/couple/600/600" alt="情侣图片" class="rounded-2xl shadow-2xl w-full h-full object-cover" />
            <div class="absolute -top-6 -right-6 bg-love-primary text-white rounded-full p-4 shadow-lg">
              <span class="text-xl font-bold">❤️</span>
            </div>
            <div class="absolute -bottom-4 -left-4 bg-white text-love-primary rounded-full p-4 shadow-lg">
              <span class="text-xl font-bold">属于我们的亲密空间</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 迷宫游戏 -->
  <section id="maze" class="py-20 px-4 bg-gradient-to-br from-white to-love-light">
    <div class="container mx-auto max-w-6xl">
      <div class="text-center mb-16">
        <h2 class="text-[clamp(2rem,4vw,3rem)] font-bold mb-4 gradient-text"> 是迷宫啊</h2>
        <p class="text-lg text-gray-700 max-w-2xl mx-auto">
          穿越三个充满挑战的迷宫，每到终点都有一封我为你写的情书。
          祝你好运哟，宝贝~
      </div>

      <!-- 关卡选择 -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
        <div id="level-1-card" class="bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 cursor-pointer border-2 border-love-primary">
          <div class="h-40 bg-love-primary relative overflow-hidden">
            <div class="absolute inset-0 flex items-center justify-center">
              <h3 class="text-white text-3xl font-bold">第一关</h3>
            </div>
            <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-white/20 rounded-full"></div>
            <div class="absolute -bottom-5 -left-5 w-24 h-24 bg-white/20 rounded-full"></div>
          </div>
          <div class="p-6">
            <h4 class="text-xl font-semibold mb-2">初恋的回忆</h4>
            <p class="text-gray-600 mb-4">宝贝，你听我讲，我真不会点男模更不会再给男主播刷礼物了</p>
            <div class="flex justify-between items-center">
              <span class="text-love-primary font-medium">简单</span>
              <button class="play-level bg-love-primary hover:bg-love-dark text-white rounded-full px-4 py-2 transition-all duration-300" data-level="1">
                开始 <i class="fa-solid fa-arrow-right ml-1"></i>
              </button>
            </div>
          </div>
        </div>

        <div id="level-2-card" class="bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 cursor-pointer border-2 border-gray-200">
          <div class="h-40 bg-love-secondary relative overflow-hidden opacity-70">
            <div class="absolute inset-0 flex items-center justify-center">
              <h3 class="text-white text-3xl font-bold">第二关</h3>
            </div>
            <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-white/20 rounded-full"></div>
            <div class="absolute -bottom-5 -left-5 w-24 h-24 bg-white/20 rounded-full"></div>
          </div>
          <div class="p-6">
            <h4 class="text-xl font-semibold mb-2">热恋的心跳</h4>
            <p class="text-gray-600 mb-4">心跳加速的感觉，就像我们确认彼此心意的时候。</p>
            <div class="flex justify-between items-center">
              <span class="text-gray-500 font-medium">中等</span>
              <button class="play-level bg-gray-300 text-gray-600 rounded-full px-4 py-2 cursor-not-allowed" data-level="2">
                未解锁
              </button>
            </div>
          </div>
        </div>

        <div id="level-3-card" class="bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 cursor-pointer border-2 border-gray-200">
          <div class="h-40 bg-love-dark relative overflow-hidden opacity-50">
            <div class="absolute inset-0 flex items-center justify-center">
              <h3 class="text-white text-3xl font-bold">第三关</h3>
            </div>
            <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-white/20 rounded-full"></div>
            <div class="absolute -bottom-5 -left-5 w-24 h-24 bg-white/20 rounded-full"></div>
          </div>
          <div class="p-6">
            <h4 class="text-xl font-semibold mb-2">永恒的承诺</h4>
            <p class="text-gray-600 mb-4">这是我们爱情的最终考验哦，穿越它，我们会永远在一起，对吗？还是······对嘛！</p>
            <div class="flex justify-between items-center">
              <span class="text-gray-500 font-medium">困难</span>
              <button class="play-level bg-gray-300 text-gray-600 rounded-full px-4 py-2 cursor-not-allowed" data-level="3">
                未解锁
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 迷宫游戏区域 -->
      <div id="maze-container" class="hidden bg-white rounded-2xl shadow-2xl p-6 md:p-10 mb-10">
        <div class="flex justify-between items-center mb-6">
          <h3 id="current-level-title" class="text-2xl font-bold text-love-primary">初恋的回忆</h3>
          <div class="flex space-x-4">
            <button id="restart-maze" class="bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-full px-4 py-2 transition-all duration-300">
              <i class="fa-solid fa-refresh mr-1"></i> 重新开始
            </button>
            <button id="exit-maze" class="bg-love-primary hover:bg-love-dark text-white rounded-full px-4 py-2 transition-all duration-300">
              <i class="fa-solid fa-times mr-1"></i> 退出
            </button>
          </div>
        </div>
        <div class="relative bg-gray-100 rounded-xl overflow-hidden" style="height: 400px;">
          <div id="maze-game" class="absolute inset-0">
            <!-- 迷宫将通过JS生成 -->
          </div>
          <div id="maze-controls" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white/80 backdrop-blur-sm rounded-full p-2 shadow-lg md:hidden">
            <div class="grid grid-cols-3 gap-2">
              <div></div>
              <button class="move-btn bg-love-primary text-white w-12 h-12 rounded-full flex items-center justify-center" data-direction="up">
                <i class="fa-solid fa-chevron-up"></i>
              </button>
              <div></div>
              <button class="move-btn bg-love-primary text-white w-12 h-12 rounded-full flex items-center justify-center" data-direction="left">
                <i class="fa-solid fa-chevron-left"></i>
              </button>
              <button class="move-btn bg-love-primary text-white w-12 h-12 rounded-full flex items-center justify-center" data-direction="down">
                <i class="fa-solid fa-chevron-down"></i>
              </button>
              <button class="move-btn bg-love-primary text-white w-12 h-12 rounded-full flex items-center justify-center" data-direction="right">
                <i class="fa-solid fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="mt-6 text-center">
          <p id="maze-instructions" class="text-gray-600">
            <i class="fa-solid fa-keyboard mr-2"></i> 使用键盘方向键或触摸按钮移动角色
          </p>
        </div>
      </div>

      <!-- 情书弹窗 -->
      <div id="letter-modal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-auto transform transition-all duration-500 scale-95 opacity-0" id="modal-content">
          <div class="p-6 border-b border-gray-100 flex justify-between items-center">
            <h3 class="text-2xl font-bold text-love-primary">来自你的情书</h3>
            <button id="close-letter" class="text-gray-400 hover:text-gray-600">
              <i class="fa-solid fa-times text-xl"></i>
            </button>
          </div>
          <div class="p-6" id="letter-content">
            <!-- 情书内容将通过JS动态生成 -->
          </div>
          <div class="p-6 border-t border-gray-100">
            <button id="close-letter-btn" class="bg-love-primary hover:bg-love-dark text-white rounded-full px-6 py-3 transition-all duration-300 w-full md:w-auto">
              收藏这封情书 <i class="fa-solid fa-heart ml-2"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- 特效容器 -->
      <div id="confetti-container" class="fixed inset-0 pointer-events-none z-40 hidden"></div>
    </div>
  </section>

  <!-- 电子情书 -->
  <section id="letters" class="py-20 px-4 bg-gradient-to-br from-love-light/50 to-white">
    <div class="container mx-auto max-w-6xl">
      <div class="text-center mb-16">
        <h2 class="text-[clamp(2rem,4vw,3rem)] font-bold mb-4 gradient-text">电子情书</h2>
        <p class="text-lg text-gray-700 max-w-2xl mx-auto">
          每封情书都代表着我对你深深的爱，有些需要宝贝通过努力来解锁哦。
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- 已解锁的情书 -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2">
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2 flex items-center">
              <i class="fa-solid fa-envelope-open-text text-love-primary mr-2"></i> 初恋的回忆
            </h3>
            <p class="text-gray-600 mb-4">永远不会忘记，我们确认关系的那天。</p>
            <div class="relative h-48 bg-love-light rounded-xl overflow-hidden mb-4">
              <img src="https://picsum.photos/seed/firstlove/800/400" alt="初恋回忆" class="w-full h-full object-cover opacity-80" />
              <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
              <div class="absolute bottom-4 left-4 text-white">
                <p class="font-medium">第一关解锁</p>
              </div>
            </div>
            <button class="open-letter w-full bg-love-primary hover:bg-love-dark text-white rounded-full py-3 transition-all duration-300" data-letter="1">
              阅读情书 <i class="fa-solid fa-arrow-right ml-1"></i>
            </button>
          </div>
        </div>

        <!-- 隐藏的情书 -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2">
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2 flex items-center">
              <i class="fa-solid fa-heart-lock text-love-primary mr-2"></i> 给我最爱的哈基兰
            </h3>
            <p class="text-gray-600 mb-4">这是一封特别的情书，只有你能打开。</p>
            <div class="relative h-48 bg-gray-100 rounded-xl overflow-hidden mb-4 flex items-center justify-center">
              <div class="text-center">
                <i class="fa-solid fa-heart text-love-primary text-5xl animate-pulse"></i>
                <p class="mt-4 text-gray-500">点击心形图标解锁</p>
              </div>
            </div>
            <button id="open-secret-letter" class="w-full bg-love-secondary hover:bg-love-secondary/80 text-white rounded-full py-3 transition-all duration-300">
              解锁特别情书 <i class="fa-solid fa-lock-open ml-1"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- 秘密情书模态框 -->
      <div id="secret-letter-modal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-auto transform transition-all duration-500 scale-95 opacity-0" id="secret-modal-content">
          <div class="p-6 border-b border-gray-100 flex justify-between items-center">
            <h3 class="text-2xl font-bold text-love-secondary">给我亲爱的宝贝/h3>
            <button id="close-secret-letter" class="text-gray-400 hover:text-gray-600">
              <i class="fa-solid fa-times text-xl"></i>
            </button>
          </div>
          <div class="p-6" id="secret-letter-content">
            <!-- 秘密情书内容 -->
            <div class="letter relative w-full h-64 md:h-80 cursor-pointer" id="secret-letter">
              <div class="letter-front absolute inset-0 bg-love-secondary rounded-xl p-6 flex flex-col items-center justify-center text-white">
                <i class="fa-solid fa-heart text-5xl mb-4 animate-pulse"></i>
                <h4 class="text-2xl font-bold mb-2">点击打开情书</h4>
                <p class="text-center">这里藏着我对你深深的爱意</p>
              </div>
              <div class="letter-back absolute inset-0 bg-white rounded-xl p-6">
                <div class="h-full overflow-auto">
                  <p class="text-gray-700 mb-4">亲爱的哈基兰先生：</p>
                  <p class="text-gray-700 mb-4">时间真快呀，一转眼我们在一起已一月有余，也迎来了我们的第一个520</p>
                  <p class="text-gray-700 mb-4">宝贝，你知道吗？其实跟你在一起的每一天都是礼物，我会好好珍惜我们一起度过的每一刻。无论是欢笑还是泪水，我们一起经历的一切都让我更加确定，你就是我要共度一生的人。</p>
                  <p class="text-gray-700 mb-4">我爱你的善良、你的聪明、你的幽默感，我爱你的一切。你就像个小小太阳照亮我平淡的生活。</p>
                  <p class="text-gray-700 mb-4">无论未来如何，我都会一直在你身边，牵着你的手，一起走过人生的每一个阶段。我承诺，我会爱你，珍惜你，尊重你，直到永远。</p>
                  <p class="text-gray-700">永远爱你的小狗</p>
                </div>
              </div>
            </div>
          </div>
          <div class="p-6 border-t border-gray-100">
            <button id="save-secret-letter" class="bg-love-secondary hover:bg-love-secondary/80 text-white rounded-full px-6 py-3 transition-all duration-300 w-full md:w-auto">
              收藏这封情书 <i class="fa-solid fa-heart ml-2"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 爱情留言板 -->
  <section id="messages" class="py-20 px-4 bg-gradient-to-br from-white to-love-light/50">
    <div class="container mx-auto max-w-6xl">
      <div class="text-center mb-16">
        <h2 class="text-[clamp(2rem,4vw,3rem)] font-bold mb-4 gradient-text">爱情留言板</h2>
        <p class="text-lg text-gray-700 max-w-2xl mx-auto">
          在这里可以给TA留言哦。
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- 留言表单 -->
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
          <h3 class="text-xl font-semibold mb-6">给TA的留言</h3>
          <form id="message-form">
            <div class="mb-4">
              <label for="message-title" class="block text-gray-700 font-medium mb-2">标题</label>
              <input type="text" id="message-title" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-love-primary/50 focus:border-love-primary transition-all duration-300" placeholder="写下你的留言标题...">
            </div>
            <div class="mb-6">
              <label for="message-content" class="block text-gray-700 font-medium mb-2">内容</label>
              <textarea id="message-content" rows="5" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-love-primary/50 focus:border-love-primary transition-all duration-300" placeholder="写下你想对TA说的话..."></textarea>
            </div>
            <button type="submit" class="w-full bg-love-primary hover:bg-love-dark text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
              <i class="fa-solid fa-paper-plane mr-2"></i> 发送留言
            </button>
          </form>
        </div>

        <!-- 留言列表 -->
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
          <h3 class="text-xl font-semibold mb-6 flex justify-between items-center">
            爱的留言
            <span class="text-sm text-gray-500" id="message-count">0 条留言</span>
          </h3>
          <div id="messages-container" class="space-y-4 max-h-[500px] overflow-y-auto pr-2">
            <!-- 示例留言 -->
            <div class="bg-love-light/30 rounded-xl p-5 transition-all duration-300 hover:shadow-md">
              <div class="flex justify-between items-start mb-3">
                <h4 class="font-semibold text-love-primary">第一个节日</h4>
                <span class="text-xs text-gray-500">刚刚</span>
              </div>
              <p class="text-gray-700">今天是我们过的第一个节日！❤️</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 页脚 -->
  <footer class="bg-love-primary/10 py-10 px-4">
    <div class="container mx-auto max-w-6xl">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-6 md:mb-0">
          <a href="#" class="text-2xl font-bold gradient-text flex items-center">
            <i class="fa-solid fa-heart-pulse mr-2"></i>
            <span>烧脑的迷宫</span>
          </a>
          <p class="text-gray-600 mt-2">我们的爱情故事，永远不会结束</p>
        </div>
        <div class="flex space-x-6">
          <a href="#home" class="text-gray-600 hover:text-love-primary transition-colors duration-300">首页</a>
          <a href="#maze" class="text-gray-600 hover:text-love-primary transition-colors duration-300">迷宫游戏</a>
          <a href="#letters" class="text-gray-600 hover:text-love-primary transition-colors duration-300">电子情书</a>
          <a href="#messages" class="text-gray-600 hover:text-love-primary transition-colors duration-300">爱情留言板</a>
        </div>
      </div>
      <div class="border-t border-gray-200 mt-8 pt-8 text-center text-gray-500 text-sm">
        <p>❤️ 我们的爱情故事始于<span id="start-date">2025年4月19日</span> ❤️</p>
      </div>
    </div>
  </footer>

  <script>
    // 导航栏滚动效果
    window.addEventListener('scroll', function() {
      const nav = document.getElementById('main-nav');
      if (window.scrollY > 10) {
        nav.classList.add('py-2', 'shadow-md');
        nav.classList.remove('py-3', 'shadow-sm');
      } else {
        nav.classList.add('py-3', 'shadow-sm');
        nav.classList.remove('py-2', 'shadow-md');
      }
    });

    // 移动端菜单切换
    document.getElementById('menu-toggle').addEventListener('click', function() {
      const mobileMenu = document.getElementById('mobile-menu');
      mobileMenu.classList.toggle('hidden');
    });

    // 平滑滚动
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          window.scrollTo({
            top: target.offsetTop - 80,
            behavior: 'smooth'
          });
          // 关闭移动端菜单
          document.getElementById('mobile-menu').classList.add('hidden');
        }
      });
    });

    // 迷宫游戏
    const mazeContainer = document.getElementById('maze-container');
    const mazeGame = document.getElementById('maze-game');
    const currentLevelTitle = document.getElementById('current-level-title');
    const mazeInstructions = document.getElementById('maze-instructions');
    const restartMaze = document.getElementById('restart-maze');
    const exitMaze = document.getElementById('exit-maze');
    const playLevelButtons = document.querySelectorAll('.play-level');
    const letterModal = document.getElementById('letter-modal');
    const modalContent = document.getElementById('modal-content');
    const letterContent = document.getElementById('letter-content');
    const closeLetter = document.getElementById('close-letter');
    const closeLetterBtn = document.getElementById('close-letter-btn');
    const confettiContainer = document.getElementById('confetti-container');
    const levelCards = [
      document.getElementById('level-1-card'),
      document.getElementById('level-2-card'),
      document.getElementById('level-3-card')
    ];
    const openLetterButtons = document.querySelectorAll('.open-letter');
    const secretLetterModal = document.getElementById('secret-letter-modal');
    const secretModalContent = document.getElementById('secret-modal-content');
    const closeSecretLetter = document.getElementById('close-secret-letter');
    const openSecretLetter = document.getElementById('open-secret-letter');
    const secretLetter = document.getElementById('secret-letter');
    const saveSecretLetter = document.getElementById('save-secret-letter');
    const messageForm = document.getElementById('message-form');
    const messagesContainer = document.getElementById('messages-container');
    const messageCount = document.getElementById('message-count');

    let currentLevel = 1;
    let playerPosition = { x: 1, y: 1 };
    let maze = [];
    let mazeWidth = 15;
    let mazeHeight = 15;
    let cellSize = 0;
    let isPlaying = false;
    let unlockedLevels = [true, false, false];

    // 迷宫地图定义
    const mazes = [
      // 第一关
      [
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
      ],
      // 第二关
      [
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],
        [1,0,1,0,1,1,1,0,1,0,1,1,1,0,1],
        [1,0,1,0,0,0,1,0,1,0,0,0,1,0,1],
        [1,0,1,1,1,0,1,0,1,1,1,0,1,0,1],
        [1,0,0,0,0,0,1,0,0,0,0,0,1,0,1],
        [1,1,1,1,1,1,1,1,1,1,1,0,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,1,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
      ],
      // 第三关
      [
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [0,0,0,0,1,0,0,0,0,0,1,0,0,0,1],
        [1,1,1,0,1,0,1,1,1,0,1,0,1,0,1],
        [1,0,0,0,1,0,1,0,0,0,1,0,1,0,1],
        [1,0,1,1,1,0,1,0,1,1,1,0,1,0,1],
        [1,0,0,0,0,0,1,0,0,0,0,0,1,0,1],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,0,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
        [1,1,1,1,1,0,1,1,1,1,1,1,1,0,1],
        [1,0,0,0,1,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,0,1,1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
      ]
    ];

    // 情书内容
    const letters = [
      // 第一关情书
      `<div class="p-6">
        <p class="text-gray-700 mb-4">亲爱的哈基兰：</p>
        <p class="text-gray-700 mb-4">咖啡杯底的漩涡替我们保管着所有未说出口的早安与晚安  </p>
        <p class="text-gray-700 mb-4">当宇宙的秒针开始生锈，我们仍有无数个春天，在彼此的脉搏里。拔节作响</p>
        <p class="text-gray-700">晴</p>
      </div>`,
      // 第二关情书
      `<div class="p-6">
        <p class="text-gray-700 mb-4">亲爱的宝贝：</p>
        <p class="text-gray-700 mb-4">每次看到你，我的心跳都会加速。你的存在让我感到无比幸福，我无法想象没有你的日子。</p>
        <p class="text-gray-700 mb-4">我爱你。</p>
        <p class="text-gray-700">Puppy晴</p>
      </div>`,
      // 第三关情书
      `<div class="p-6">
        <p class="text-gray-700 mb-4">亲爱的老公：</p>
        <p class="text-gray-700 mb-4">我们每一刻都值得珍惜。</p>
        <p class="text-gray-700 mb-4">我想告诉你，无论未来如何，我都会一直在你身边。我会爱你，珍惜你，尊重你，直到永远。</p>
        <p class="text-gray-700 mb-4">我希望我们能一起看遍世间美景，一起经历生活的酸甜苦辣（不对，只要甜其他都去掉），一起慢慢变老。</p>
        <p class="text-gray-700">爱你的宝</p>
      </div>`
    ];

    // 开始游戏
    playLevelButtons.forEach(button => {
      button.addEventListener('click', function() {
        const level = parseInt(this.getAttribute('data-level'));
        if (unlockedLevels[level - 1]) {
          startLevel(level);
        }
      });
    });

    // 重新开始游戏
    restartMaze.addEventListener('click', function() {
      startLevel(currentLevel);
    });

    // 退出游戏
    exitMaze.addEventListener('click', function() {
      mazeContainer.classList.add('hidden');
      isPlaying = false;
    });

    // 关闭情书模态框
    closeLetter.addEventListener('click', closeLetterModal);
    closeLetterBtn.addEventListener('click', closeLetterModal);

    // 关闭秘密情书模态框
    closeSecretLetter.addEventListener('click', function() {
      secretLetterModal.classList.remove('flex');
      secretLetterModal.classList.add('hidden');
      secretModalContent.classList.remove('scale-100', 'opacity-100');
      secretModalContent.classList.add('scale-95', 'opacity-0');
    });

    // 打开秘密情书
    openSecretLetter.addEventListener('click', function() {
      secretLetterModal.classList.remove('hidden');
      secretLetterModal.classList.add('flex');
      setTimeout(() => {
        secretModalContent.classList.remove('scale-95', 'opacity-0');
        secretModalContent.classList.add('scale-100', 'opacity-100');
      }, 10);
    });

    // 翻转秘密情书
    secretLetter.addEventListener('click', function() {
      this.classList.toggle('open');
    });

    // 保存秘密情书
    saveSecretLetter.addEventListener('click', function() {
      alert('情书已保存到您的爱情宝箱中！');
    });

    // 关闭情书模态框函数
    function closeLetterModal() {
      letterModal.classList.remove('flex');
      letterModal.classList.add('hidden');
      modalContent.classList.remove('scale-100', 'opacity-100');
      modalContent.classList.add('scale-95', 'opacity-0');
      
      // 清除特效
      confettiContainer.classList.add('hidden');
      confettiContainer.innerHTML = '';
      
      // 如果完成了所有关卡，显示庆祝信息
      if (currentLevel === 3) {
        alert('恭喜你完成了所有迷宫关卡！我爱你永远不变！');
      } else {
        // 解锁下一关
        unlockedLevels[currentLevel] = true;
        updateLevelCards();
        
        // 进入下一关
        currentLevel++;
      }
    }

    // 打开情书
    openLetterButtons.forEach(button => {
      button.addEventListener('click', function() {
        const letterIndex = parseInt(this.getAttribute('data-letter')) - 1;
        openLetter(letterIndex);
      });
    });

    // 打开情书函数
    function openLetter(letterIndex) {
      letterContent.innerHTML = letters[letterIndex];
      letterModal.classList.remove('hidden');
      letterModal.classList.add('flex');
      setTimeout(() => {
        modalContent.classList.remove('scale-95', 'opacity-0');
        modalContent.classList.add('scale-100', 'opacity-100');
      }, 10);
    }

    // 开始关卡
    function startLevel(level) {
      currentLevel = level;
      maze = mazes[level - 1];
      mazeWidth = maze[0].length;
      mazeHeight = maze.length;
      
      // 更新关卡标题
      const levelTitles = ['初恋的回忆', '热恋的心跳', '永恒的承诺'];
      currentLevelTitle.textContent = levelTitles[level - 1];
      
      // 显示迷宫容器
      mazeContainer.classList.remove('hidden');
      
      // 计算单元格大小
      const mazeGameWidth = mazeGame.clientWidth;
      const mazeGameHeight = mazeGame.clientHeight;
      cellSize = Math.min(mazeGameWidth / mazeWidth, mazeGameHeight / mazeHeight);
      
      // 设置玩家初始位置
      playerPosition = { x: 1, y: 1 };
      
      // 绘制迷宫
      drawMaze();
      
      // 添加键盘控制
      document.addEventListener('keydown', handleKeydown);
      
      // 添加触摸控制
      document.querySelectorAll('.move-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const direction = this.getAttribute('data-direction');
          movePlayer(direction);
        });
      });
      
      isPlaying = true;
    }

    // 绘制迷宫
    function drawMaze() {
      // 清空迷宫
      mazeGame.innerHTML = '';
      
      // 创建迷宫单元格
      for (let y = 0; y < mazeHeight; y++) {
        for (let x = 0; x < mazeWidth; x++) {
          const cell = document.createElement('div');
          cell.style.position = 'absolute';
          cell.style.left = `${x * cellSize}px`;
          cell.style.top = `${y * cellSize}px`;
          cell.style.width = `${cellSize}px`;
          cell.style.height = `${cellSize}px`;
          
          if (maze[y][x] === 1) {
            // 墙壁
            cell.classList.add('maze-wall');
          } else {
            // 路径
            cell.classList.add('maze-path');
          }
          
          mazeGame.appendChild(cell);
        }
      }
      
      // 创建玩家
      const player = document.createElement('div');
      player.classList.add('maze-player');
      player.style.left = `${playerPosition.x * cellSize}px`;
      player.style.top = `${playerPosition.y * cellSize}px`;
      player.id = 'player';
      mazeGame.appendChild(player);
      
      // 创建终点
      const finish = document.createElement('div');
      finish.classList.add('maze-finish');
      finish.style.left = `${(mazeWidth - 2) * cellSize}px`;
      finish.style.top = `${(mazeHeight - 2) * cellSize}px`;
      finish.id = 'finish';
      mazeGame.appendChild(finish);
    }

    // 键盘控制
    function handleKeydown(e) {
      if (!isPlaying) return;
      
      switch (e.key) {
        case 'ArrowUp':
          movePlayer('up');
          break;
        case 'ArrowDown':
          movePlayer('down');
          break;
        case 'ArrowLeft':
          movePlayer('left');
          break;
        case 'ArrowRight':
          movePlayer('right');
          break;
      }
    }

    // 移动玩家
    function movePlayer(direction) {
      const player = document.getElementById('player');
      const finish = document.getElementById('finish');
      let newX = playerPosition.x;
      let newY = playerPosition.y;
      
      switch (direction) {
        case 'up':
          newY--;
          break;
        case 'down':
          newY++;
          break;
        case 'left':
          newX--;
          break;
        case 'right':
          newX++;
          break;
      }
      
      // 检查是否可以移动
      if (newX >= 0 && newX < mazeWidth && newY >= 0 && newY < mazeHeight && maze[newY][newX] === 0) {
        playerPosition = { x: newX, y: newY };
        player.style.left = `${playerPosition.x * cellSize}px`;
        player.style.top = `${playerPosition.y * cellSize}px`;
        
        // 检查是否到达终点
        if (playerPosition.x === mazeWidth - 2 && playerPosition.y === mazeHeight - 2) {
          setTimeout(() => {
            // 显示庆祝特效
            showConfetti();
            
            // 显示情书
            openLetter(currentLevel - 1);
          }, 500);
        }
      }
    }

    // 显示庆祝特效
    function showConfetti() {
      confettiContainer.classList.remove('hidden');
      confettiContainer.innerHTML = '';
      
      const colors = ['#FF4D6D', '#C77DFF', '#FFC2D1', '#C9184A', '#FFB3C1'];
      
      for (let i = 0; i < 200; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.animationDelay = `${Math.random() * 3}s`;
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        confetti.style.width = `${5 + Math.random() * 10}px`;
        confetti.style.height = `${5 + Math.random() * 10}px`;
        confettiContainer.appendChild(confetti);
      }
    }

    // 更新关卡卡片状态
    function updateLevelCards() {
      for (let i = 0; i < levelCards.length; i++) {
        if (unlockedLevels[i]) {
          levelCards[i].classList.remove('border-gray-200');
          levelCards[i].classList.add('border-love-primary');
          
          const playButton = levelCards[i].querySelector('.play-level');
          playButton.classList.remove('bg-gray-300', 'text-gray-600', 'cursor-not-allowed');
          playButton.classList.add('bg-love-primary', 'hover:bg-love-dark', 'text-white');
          playButton.removeAttribute('disabled');
          
          const levelImage = levelCards[i].querySelector('.h-40');
          levelImage.classList.remove('opacity-70', 'opacity-50');
        }
      }
    }

    // 留言板功能
    messageForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const title = document.getElementById('message-title').value.trim();
      const content = document.getElementById('message-content').value.trim();
      
      if (!title || !content) {
        alert('请填写标题和内容');
        return;
      }
      
      // 创建新留言
      const messageElement = document.createElement('div');
      messageElement.className = 'bg-love-light/30 rounded-xl p-5 transition-all duration-300 hover:shadow-md';
      messageElement.innerHTML = `
        <div class="flex justify-between items-start mb-3">
          <h4 class="font-semibold text-love-primary">${title}</h4>
          <span class="text-xs text-gray-500">刚刚</span>
        </div>
        <p class="text-gray-700">${content}</p>
      `;
      
      // 添加到留言列表顶部
      messagesContainer.insertBefore(messageElement, messagesContainer.firstChild);
      
      // 更新留言计数
      const count = messagesContainer.children.length;
      messageCount.textContent = `${count} 条留言`;
      
      // 清空表单
      document.getElementById('message-title').value = '';
      document.getElementById('message-content').value = '';
      
      // 添加提交成功动画
      messageElement.classList.add('animate-pulse-slow');
      setTimeout(() => {
        messageElement.classList.remove('animate-pulse-slow');
      }, 1000);
    });

    // 初始化
    updateLevelCards();
  </script>
</body>
</html>  